<!DOCTYPE html>
<html lang="vi">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Zoom Meeting - Modern UI</title>

        <!-- Bootstrap CSS -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.1/font/bootstrap-icons.min.css" rel="stylesheet">
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <div id="waitingOverlay" class="overlay" style="display: none;">
            <div class="overlay-content">
                <div class="spinner"></div>
                <h2>Đang chờ người chủ trì...</h2>
                <p>Vui lòng đợi, người chủ trì sẽ sớm cho bạn vào cuộc họp.</p>
            </div>
        </div>
        <div class="main-container">
            <!-- Video Section -->
            <div class="video-section">
                <!-- Top Bar -->
                <div class="top-bar">
                    <div class="meeting-info">
                        <span class="meeting-title" id="roomName">Meeting Room Pro</span>
                        <div class="meeting-time">
                            <i class="bi bi-clock"></i>
                            <span>Meeting time</span>
                        </div>
                    </div>
                </div>

                <!-- Video Grid -->
                <div class="video-grid-container">
                    <div class="video-grid" id="videoGrid">
                        <!-- Videos will be generated by JavaScript -->
                    </div>
                </div>

                <!-- Controls Bar -->
                <div class="controls-bar">
                    <div class="controls-wrapper">
                        <button class="control-btn" id="micBtn" onclick="toggleMic()">
                            <i class="bi bi-mic-fill" id="micIcon"></i>
                            <span class="btn-label">Mic</span>
                        </button>

                        <button class="control-btn" id="videoBtn" onclick="toggleVideo()">
                            <i class="bi bi-camera-video-fill" id="videoIcon"></i>
                            <span class="btn-label">Video</span>
                        </button>

                        <button class="control-btn" onclick="toggleChat()">
                            <div class="icon-wrapper">

                                <i class="bi bi-chat-dots-fill"></i>

                                <span id="chatNotificationDot" class="notification-badge" style="display: none;"></span>
                            </div>
                            <span class="btn-label">Chat</span>
                        </button>

                        <button class="control-btn" id="shareBtn" onclick="shareScreen()">
                            <i class="bi bi-share-fill"></i>
                            <span class="btn-label">Chia sẻ</span>
                        </button>

                        <button class="control-btn" onclick="toggleParticipants()" style="position: relative;">
                            <div class="icon-wrapper">
                                <i class="bi bi-people-fill"></i>

                                <span id="waitingNotificationDot" class="notification-badge" style="display: none;"></span>
                            </div>
                            <span class="btn-label">(<span id="participantCount">1</span>)</span>
                        </button>

                        <button class="control-btn" onclick="toggleStats()">
                            <i class="bi bi-activity"></i>
                            <span class="btn-label">Thông số</span>
                        </button>

                        <button class="control-btn btn-end" onclick="endCall()">
                            <i class="bi bi-telephone-fill"></i>
                            <span class="btn-label">Kết thúc</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Chat Panel -->
            <div class="side-panel" id="chatPanel">
                <div class="panel-header">
                    <span class="panel-title">Trò chuyện</span>
                    <button class="close-btn" onclick="toggleChat()">
                        <i class="bi bi-x-lg"></i>
                    </button>
                </div>
                <div class="chat-messages" id="chatMessages">
                </div>
                <div class="chat-input-wrapper">
                    <div class="chat-input-group">
                        <input type="text" class="chat-input" id="messageInput" placeholder="Nhập tin nhắn..." onkeypress="handleKeyPress(event)">
                        <button class="send-btn" onclick="sendMessage()">
                            <i class="bi bi-send-fill"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Participants Panel -->
            <div class="side-panel" id="participantsPanel">
                <div class="panel-header">
                    <span class="panel-title">Người tham gia (<span id="participantCountPanel">1</span>)</span>
                    <button class="close-btn" onclick="toggleParticipants()">
                        <i class="bi bi-x-lg"></i>
                    </button>
                </div>

                <div id="waitingRoomArea" class="waiting-room-area" style="display: none;">
                    <h5 class="waiting-header">Phòng chờ (<span id="waitingCount">0</span>)</h5>
                    <div id="waitingList" class="participant-list">
                    </div>
                    <hr class="divider" />
                </div>

                <div class="active-participants-area">
                    <h5 class="active-header">Trong cuộc họp</h5>
                    <div class="participant-list" id="participantList">
                    </div>
                </div>
            </div>

            <!--Stat panel-->
            <div class="side-panel" id="statsPanel">
                <div class="panel-header">
                    <span class="panel-title">Thông số đường truyền</span>
                    <button class="close-btn" onclick="toggleStats()">
                        <i class="bi bi-x-lg"></i>
                    </button>
                </div>

                <div class="stats-container" id="statsList">
                </div>
            </div>
        </div>

        <!-- Bootstrap JS -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>

        <!-- Main application - ES6 modules -->
        <script type="module" src="app_new.js"></script>
    </body>
</html>
